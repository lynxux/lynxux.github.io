{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2021-07-01-windows-terminal-proxy/","result":{"data":{"markdownRemark":{"excerpt":"初衷 Windows 下的浏览器的代理是很容易解决的，各种软件或者插件都能直接解决，可是 terminal 中的代理之前尝试过很多次一直没有成功。这也导致了一直没有成功安装 Gatsby 。而且没有代理，git clone…","html":"<h2 id=\"初衷\" style=\"position:relative;\"><a href=\"#%E5%88%9D%E8%A1%B7\" aria-label=\"初衷 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>初衷</h2>\n<p>Windows 下的浏览器的代理是很容易解决的，各种软件或者插件都能直接解决，可是 terminal 中的代理之前尝试过很多次一直没有成功。这也导致了一直没有成功安装 Gatsby 。而且没有代理，git clone 也经常失败。这个问题直到前两天才解决。</p>\n<h2 id=\"解决\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E5%86%B3\" aria-label=\"解决 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决</h2>\n<ol>\n<li>网上其实相应的解决方法都有很多，但是一直就是失败。下面是一般的方法：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">http_proxy</span><span class=\"token operator\">=</span>http://127.0.0.1:1080\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">http_proxys</span><span class=\"token operator\">=</span>http://127.0.0.1:1080</code></pre></div>\n<ul>\n<li>这里的配置是一次性的，即当前会话关闭后，该配置就会失效。</li>\n<li>http 和 https 都要设置。</li>\n<li>然后使用 <code class=\"language-text\">curl -v http://www.google.com</code> 进行验证即可。</li>\n</ul>\n<p>我们都知道1080是指端口，所以我们要把它替换为我们主机上对应的监听端口号。我使用的是 v2ray， 在设置里我们能看到本地的监听端口号为10808， 那就把1080替换为10808。</p>\n<p>看似很简单的过程，那为什么一直失败呢？</p>\n<p>经过不断的搜索，终于在 <a href=\"https://github.com/v2ray/v2ray-core/issues/382\">github issues-无法正确使用v2ray</a> 中看到：</p>\n<blockquote>\n<p><strong><code class=\"language-text\">V2rayN</code>的情况下，右键开启<code class=\"language-text\">http</code>代理时，<code class=\"language-text\">http</code>代理的端口是<code class=\"language-text\">socks+1</code></strong>。比如<code class=\"language-text\">V2ray</code>的配置文件<code class=\"language-text\">socks</code>代理是1080，那么默认<code class=\"language-text\">http</code>代理就是1081。有些软件只能用<code class=\"language-text\">http</code>代理不能用<code class=\"language-text\">socks</code>代理，这时就要用到1081这个。否则指向1080端口的话，v2ray就会不停的报错 <code class=\"language-text\">v2ray.com/core/proxy/socks: unknown Socks version xx</code></p>\n</blockquote>\n<p>原来端口号应该是10809 ！把端口号改为10809后，成功！</p>\n<p>是个很小的问题，但是却困扰了我很久，遂记录一下。</p>","tableOfContents":"<ul>\n<li><a href=\"#%E5%88%9D%E8%A1%B7\">初衷</a></li>\n<li><a href=\"#%E8%A7%A3%E5%86%B3\">解决</a></li>\n</ul>","fields":{"date":"2021-07-01"},"frontmatter":{"title":"v2ray 下 windows terminal 代理的配置","description":"terminal 中的代理之前尝试过很多次一直没有成功，这个问题直到前两天才解决","tags":["windows","proxy","v2ray"],"image":"https://source.unsplash.com/duMttyw2Xc0/1600x900","noComments":null}}},"pageContext":{"slug":"/posts/2021-07-01-windows-terminal-proxy/","previous":{"fields":{"slug":"/posts/2021-06-30-someThinking/"},"frontmatter":{"title":"随想"}},"next":{"fields":{"slug":"/posts/2021-09-06-first-year-graduate/"},"frontmatter":{"title":"回顾我的研一生活"}},"dateFormat":"YYYY-MM-DD"}},"staticQueryHashes":["3250557336","3788958598"]}